# test_task_for_cloveri
## Стэк - Flask Framework

### Как запустить проект локально
* Клонировать данный репозиторий `git clone https://github.com/YuriyShashurin/test_task_for_cloveri.git`;
* Перейти в папку проекта test_task_for_cloveri;
* Создать virtual environment `python -m venv venv`;
* Активировать его `venv/Scripts/activate.bat`
* Установить зависимости `requirements pip install -r requirements.txt`;
* Установить переменную окружения в консоли: `set FLASK_APP=run`
* Запустить дев=сервер командой в консоли `python run.py`. Он запустится по адресу `http://127.0.0.1:5000/`
* Произвести настройки базы данных командами в консоли `flask db init`, затем `flask db migrate`, затем `flask db upgrade`
* Кидать запросы на указанные ниже endpoints для Api методов

## Основные таблицы базы данных, для построения подобной системы
* `User` - данные по логину/паролю и роли в системе;
* `Role` - хранение роли пользователя веб-приложения;
* `LecturerContactInfo` - данные по профилю лектора;
* `ConsumerContactInfo` - данные по профилю заказчика лекций;
* `Lectures` - таблица для хранения информации по лекции;
* `LecturerContactInfo` - таблица для хранения контактной информации лектора;
* `ConsumerContactInfo` - таблица для хранения контактной информации заказчика лекций;
* `Cities` - таблица для хранения городов пользователей для добавления их в контактную информацию;
* `Order` - таблица для хранения заказов, которые создают заказчики для лекторов;
* `Chat` - таблица для хранения информации об инициациированном общении по заказу между заказчиков и лектором ;
* `ChatMessage` - таблица для хранения сообщений внутри чатов;


## Основные АПИ методы для реализации подобной системы
* `'/signup', methods=["POST", "GET"]` - регистрация пользователей
* `'/login', methods=["GET", "POST"]` - вход пользователей
* `'/create_customer_profile', methods=["POST"]` - создание профиля заказчика, возвращает Json объект созданного профиля
* `'/create_lecture_profile', methods=["GET", "POST"]` - создание профиля лектора, возвращает Json объект созданного профиля
* `/lecture_profile/<id>', methods=["GET", "PUT"]` - получение и изменение профиля лектора по айди профиля. возвращает Json объект профиля
* `'/customer_profile/<id>', methods=["GET", "PUT"]` - получение и изменение профиля заказчика по айди профиля. возвращает Json объект профиля
* `''/create_lectures', methods=["POST"]` - Создание объекта лекции к привязке к лектору, который его создает. возвращает Json объект созданной лекции
* `'/lectures', methods=["GET"]` - Получение всех созданных объектов лекций
* `'/lecture/<id>', methods=["GET", "PUT", "DELETE"]` - Получение, изменение и удаление объекта лекции по ее айди.
* `'/create_order', methods=["POST"]` - Создание объекта заказа заказчиков в привязке к лектору и конкретной его лекции. Возвращает Json заказа
* `'/order/<id>', methods=["GET", "PUT"]` - Получение, изменение и удаление объекта заказа по его айди.
* `'/consumer_orders', methods=["GET"]` - Получение всех заказов пользователей
* `'/consumer_orders/<consumer_id>', methods=["GET"]` - Получение всех заказов по конкретному айди заказчика
* `'/lecturer_orders/<lecturer_id>', methods=["GET"]` - Получение всех заказов для конкретного айди лектора
* `'/chat/<id>', methods=["GET"]` - Получение информации по айди чата вместе с сообщениями в нем
* `'/create_message', methods=["POST"]` - создание сообщения в чат
* `'/delete_message/<id>', methods=["DELETE"]` - удаление сообщения из чата по айди
* `'/add_city', methods=["POST"]` - добавления города в таблицу Cities 
* `'/add_lecture_review', methods=["POST"]` - добавления отзыва заказчиком на проведенную лекцию в заказе
* `'/review_of_lecture/<id>', methods=["GET", "PUT", "DELETE"]` - Получение, изменение и удаление объекта отзыва по ее айди.
* `''/add_order_status', methods=["POST"]` - добавления статуса заказа
* `'/get_avg_rating/<lecturer_id>/<lecture_id>', methods=["GET"]` - получение среднего рейтинга лекции от конкретного лектора
* `'/get_avg_rating/<lecturer_id>', methods=["GET"]` - получение среднего рейтинга конкретного лектора в целом по всем лекциям
* `'/orders_finished/<profile_id>', methods=["GET"]` - ролучения количества завершенных проектов у лектора и заказчика
* `'/orders_finished', methods=["GET"]` - получения количества всего завершенных проектов в целом в приложении
* `'/change_order_status/<order_id>', methods=["PUT"]` - изменения статуса заказа
* `'/sum_messages/<chat_id>', methods=["GET"]` - получение количества сообщений в конкретном чате



